<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid position-relative">
    <a class="navbar-brand d-flex align-items-center" routerLink="/inicio" style="cursor: pointer;">
      <img src="assets/img/LogoChi.jpg" alt="Logo" height="40">
      <span class="ms-2">CFT Estatal Arica y Parinacota</span>
    </a>
    <div class="position-absolute top-50 start-50 translate-middle d-none d-lg-block">
      <span class="text-white fs-4 fw-bold text-uppercase">Establecimientos</span>
    </div>
    <button type="button" class="btn btn-warning nav-action-btn ms-auto" (click)="goBack()">
      <i class="bi bi-arrow-left me-1"></i>
      Regresar
    </button>
  </div>
</nav>




<details class="col-11 col-md-10 mx-auto p-4 mt-4 card shadow-sm" style="min-height: auto; background-color: white !important;">
	<summary class="h4 mb-3 text-success" style="cursor: pointer;">ðŸ”– Generador de QR (redirige a Registro por Estudiante)</summary>
	<p class="text-muted">Selecciona un estacionamiento (A1..A9) y genera un QR que apunta al formulario de registro por estudiante.</p>
	<div class="mb-3">
		<label class="form-label">Establecimiento</label>
		<select class="form-select" [(ngModel)]="selectedEstablecimiento" (ngModelChange)="selectEstablecimiento($event)">
			<option [ngValue]="null">-- Seleccione --</option>
			<option *ngFor="let est of establecimientos" [ngValue]="est">{{ est.nombre || est['identificador'] || est._id }}</option>
		</select>
	</div>

	<div class="d-flex gap-2 align-items-center">
		<label class="me-2 mb-0">Prefijo (letra):</label>
		<input class="form-control w-auto text-center" [value]="qrPrefix" readonly />

		<label class="me-2 mb-0">NÃºmero inicio:</label>
		<input type="number" min="1" max="99" class="form-control w-auto" [(ngModel)]="startNumber" />

		<label class="me-2 mb-0">Cantidad (1-3):</label>
		<select class="form-select w-auto" [(ngModel)]="quantity">
			<option [value]="1">1</option>
			<option [value]="2">2</option>
			<option [value]="3">3</option>
		</select>

		<button class="btn btn-success ms-2" (click)="generarQR()">Generar QR</button>
		<button *ngIf="targetUrls.length" class="btn btn-outline-secondary ms-2" (click)="copiarUrl()">Copiar URL(s)</button>
	</div>

	<div class="mt-3">
		<div *ngIf="qrImageUrls.length">
			<div class="d-flex gap-3 flex-wrap">
				<div *ngFor="let img of qrImageUrls; let i = index" class="text-center">
					<img [src]="img" alt="QR" style="max-width:200px;" />
					<p class="small mt-2 text-break">URL: <a [href]="targetUrls[i]" target="_blank">{{ targetUrls[i] }}</a></p>
					<button class="btn btn-sm btn-outline-secondary" (click)="copiarUrl(i)">Copiar URL</button>
				</div>
			</div>
		</div>
	</div>
</details>
